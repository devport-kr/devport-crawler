# Application
APP_NAME=DevPort Crawler
APP_VERSION=1.0.0
DEBUG=False

# Database
DATABASE_URL=postgresql://devport:password@localhost:5432/devportdb

# LLM API for Korean summarization (OpenAI gpt-5-nano)
OPENAI_API_KEY=sk-your-openai-api-key-here
# Max completion tokens (output) per LLM request
LLM_MAX_TOKENS=8000

# GitHub API (for trending repos)
GITHUB_TOKEN=ghp_your-github-token-here

# Port-domain crawler defaults (Phase 4)
# Seed scope and candidate policy
PORT_TARGET_MIN=15
PORT_TARGET_MAX=20
PORT_PROJECT_TARGET_MIN=12
PORT_PROJECT_TARGET_MAX=20
PORT_ALLOW_UNDERFILL=True
PORT_SEED_POLICY=hybrid
PORT_CANDIDATE_WEIGHT_RELEVANCE=0.5
PORT_CANDIDATE_WEIGHT_STARS=0.3
PORT_CANDIDATE_WEIGHT_ACTIVITY=0.2
PORT_CANDIDATE_DIVERSITY_SOFT_CAP=3

# Full-history intent with practical caps
PORT_BACKFILL_FULL_HISTORY=True
PORT_BACKFILL_MAX_STARGAZER_PAGES=300
PORT_BACKFILL_MAX_RELEASE_PAGES=50
PORT_BACKFILL_MAX_TAG_PAGES=50
PORT_BACKFILL_CHANGELOG_MAX_CHARS=120000

# Daily stage cadence controls
PORT_PROJECT_SYNC_HOURS=24
PORT_EVENT_SYNC_HOURS=24
PORT_METRICS_SYNC_HOURS=24
PORT_OVERVIEW_SYNC_HOURS=24
PORT_STAR_HISTORY_SYNC_HOURS=24

# GitHub client retry/concurrency/rate-limit tuning
PORT_GITHUB_TIMEOUT_SECONDS=30.0
PORT_GITHUB_MAX_RETRIES=3
PORT_GITHUB_BACKOFF_BASE_SECONDS=1.0
PORT_GITHUB_BACKOFF_MAX_SECONDS=16.0
PORT_GITHUB_RATE_LIMIT_BUFFER_SECONDS=2
PORT_GITHUB_CONCURRENCY=4

# Summarization retry/backoff controls
PORT_SUMMARY_MAX_ATTEMPTS=5
PORT_SUMMARY_BACKOFF_BASE_SECONDS=2.0
PORT_SUMMARY_BACKOFF_MAX_SECONDS=30.0
PORT_SUMMARY_TIMEOUT_SECONDS=45

# Artificial Analysis API (for LLM rankings and media benchmarks)
# Get your API key from https://artificialanalysis.ai/
ARTIFICIAL_ANALYSIS_API_KEY=your-artificial-analysis-api-key-here
# Optional override for media endpoints (defaults to ARTIFICIAL_ANALYSIS_API_KEY)
ARTIFICIAL_ANALYSIS_MEDIA_API_KEY=

# Crawling settings
CRAWL_DELAY_SECONDS=2
MAX_CONCURRENT_REQUESTS=5
USER_AGENT=DevPortCrawler/1.0 (+https://devport.kr)

# Playwright settings
PLAYWRIGHT_HEADLESS=True
PLAYWRIGHT_TIMEOUT=30000

# Deduplication
TITLE_SIMILARITY_THRESHOLD=0.9

# Scoring weights
GITHUB_SOURCE_WEIGHT=2.0
BLOG_SOURCE_WEIGHT=1.0
TIME_DECAY_DAYS=7

# Scoring - Time Decay (Exponential Decay System)
# Controls how quickly article scores decrease over time
SCORE_PLATEAU_DAYS=2       # Days before decay starts (0-2 days: full boost)
SCORE_HALF_LIFE_DAYS=4.0   # Days for score to halve (exponential decay rate)
SCORE_MAX_AGE_DAYS=14      # Articles older than this get zero score

# Filtering thresholds
MIN_REACTIONS_DEVTO=10
MIN_REACTIONS_HASHNODE=5
MIN_UPVOTES_REDDIT=100
MIN_SCORE_HACKERNEWS=50
MIN_STARS_GITHUB=50

# Hacker News settings
MAX_STORIES_HACKERNEWS=100  # Number of top stories to fetch
MAX_AGE_DAYS_HACKERNEWS=7   # Skip stories older than this

# Reddit API (optional OAuth; falls back to public if missing)
REDDIT_CLIENT_ID=your-reddit-client-id
REDDIT_CLIENT_SECRET=your-reddit-client-secret

# Discord webhook for failed content fetch notifications (optional)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/1471338577697702029/U8_HGgk8jioH7w3_sBzLkLfkd0lJt8OY7mWg019qnbztiE_cMKjloNqXQ2j6loFNj8sf

# AWS (if deploying to Lambda)
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key

# GCP (if deploying to Cloud Run)
GCP_PROJECT_ID=your-project-id
GCP_REGION=us-central1
